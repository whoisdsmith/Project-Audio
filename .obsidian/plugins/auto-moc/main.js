/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  TagSuggestModal: () => TagSuggestModal,
  default: () => AutoMOC
});
var import_obsidian = __toModule(require("obsidian"));
var DEFAULT_SETTINGS = {
  showRibbonButton: true,
  linkToHeading: false,
  linkingMentionsNotice: true,
  noNewLinksNotice: true,
  newLinksAddedNotice: false
};
var TagSuggestModal = class extends import_obsidian.FuzzySuggestModal {
  constructor(app2, plugin) {
    super(app2);
    this.plugin = plugin;
  }
  onOpen() {
    this.setPlaceholder("Import notes with tags matching...");
    this.setInstructions([
      { command: "\u2191\u2193", purpose: "to navigate" },
      { command: "\u21B5", purpose: "to select tag" },
      { command: "esc", purpose: "to dismiss" }
    ]);
    this.inputEl.focus();
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  getItems() {
    const allFiles = this.app.metadataCache.resolvedLinks;
    let tagsSet = new Set();
    Object.keys(allFiles).forEach((key) => {
      const file = this.app.vault.getAbstractFileByPath(key);
      if (file instanceof import_obsidian.TFile) {
        const body_tags = app.metadataCache.getFileCache(file).tags;
        const frontmatter = this.app.metadataCache.getFileCache(file).frontmatter;
        if (body_tags) {
          for (const tag of body_tags) {
            tagsSet.add(tag["tag"]);
          }
        }
        let f_tags = [];
        if (frontmatter) {
          if (Array.isArray(frontmatter["tags"])) {
            f_tags = frontmatter["tags"];
            for (const f_tag of f_tags) {
              tagsSet.add("#" + f_tag);
            }
          }
          if (String.isString(frontmatter["tags"])) {
            f_tags = frontmatter["tags"].split(", ");
            for (const f_tag of f_tags) {
              tagsSet.add("#" + f_tag);
            }
          }
        }
      }
    });
    return Array.from(tagsSet).sort();
  }
  getItemText(item) {
    return item;
  }
  onChooseItem(item, evt) {
    this.selection = item;
    this.plugin.runAutoMOC(item);
  }
};
var AutoMOC = class extends import_obsidian.Plugin {
  getPresentLinks(currFilePath) {
    const allFiles = this.app.metadataCache.resolvedLinks;
    const presentLinks = Object.keys(allFiles[currFilePath]);
    return presentLinks.sort();
  }
  getLinkedMentions(currFilePath) {
    const allFiles = this.app.metadataCache.resolvedLinks;
    let linkedMentions = [];
    Object.keys(allFiles).forEach((key) => {
      if (currFilePath in allFiles[key]) {
        linkedMentions.push(key);
      }
    });
    return linkedMentions.sort();
  }
  getTaggedMentions(tag) {
    const allFiles = this.app.metadataCache.resolvedLinks;
    let taggedMentions = [];
    const toCompare = tag.replace("#", "");
    Object.keys(allFiles).forEach((key) => {
      const file = this.app.vault.getAbstractFileByPath(key);
      if (file instanceof import_obsidian.TFile) {
        const body_tags = app.metadataCache.getFileCache(file).tags;
        const frontmatter = this.app.metadataCache.getFileCache(file).frontmatter;
        if (body_tags) {
          for (const tag2 of body_tags) {
            if (tag2["tag"].replace("#", "") === toCompare) {
              taggedMentions.push(file.path);
            }
          }
        }
        if (frontmatter) {
          let f_tags = [];
          if (Array.isArray(frontmatter["tags"])) {
            f_tags = frontmatter["tags"];
            for (const f_tag of f_tags) {
              if (f_tag === toCompare) {
                taggedMentions.push(file.path);
              }
            }
          }
          if (String.isString(frontmatter["tags"])) {
            f_tags = frontmatter["tags"].split(", ");
            for (const f_tag of f_tags) {
              if (f_tag === toCompare) {
                taggedMentions.push(file.path);
              }
            }
          }
        }
      }
    });
    const uniqueTaggedMentions = taggedMentions.filter((value, index, array) => array.indexOf(value) === index);
    return uniqueTaggedMentions;
  }
  addMissingLinks(activeFileView, presentLinks, allLinkedMentions, tag) {
    return __async(this, null, function* () {
      let addFlag = false;
      for (const path of allLinkedMentions) {
        if (!presentLinks.includes(path)) {
          const file = this.app.vault.getAbstractFileByPath(path);
          if (file instanceof import_obsidian.TFile) {
            const fileAliases = this.app.metadataCache.getFileCache(file).frontmatter;
            let alias = "";
            if (fileAliases && Array.isArray(fileAliases["aliases"]) && fileAliases["aliases"].length > 0) {
              alias = "|" + fileAliases.aliases[0];
            }
            let closestHeading = "";
            let allHeadings = [];
            if (this.settings.linkToHeading) {
              const headingsLocations = yield this.getHeadingsLocationsInFile(path);
              const linkTagLocations = yield this.getLinkTagLocationsInFile(activeFileView, path, tag);
              for (let i = 0; i < linkTagLocations.length; i++) {
                closestHeading = this.determineClosestHeading(headingsLocations, linkTagLocations[i]);
                allHeadings.push(closestHeading);
              }
            }
            if (allHeadings.length > 0) {
              for (let i = 0; i < allHeadings.length; i++) {
                activeFileView.editor.replaceSelection(this.app.fileManager.generateMarkdownLink(file, activeFileView.file.path, "#" + allHeadings[i], alias = alias) + "\n");
              }
            } else {
              activeFileView.editor.replaceSelection(this.app.fileManager.generateMarkdownLink(file, activeFileView.file.path, alias = alias) + "\n");
            }
            addFlag = true;
          }
        }
      }
      if (this.settings.newLinksAddedNotice && addFlag)
        new import_obsidian.Notice("New links added to note");
      else if (this.settings.noNewLinksNotice && !addFlag)
        new import_obsidian.Notice("No new links found");
    });
  }
  getHeadingsLocationsInFile(filePath) {
    return __async(this, null, function* () {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian.TFile) {
        const fileContent = yield this.app.vault.read(file);
        const lines = fileContent.split("\n");
        const regXHeader = /#{1,6}\s.+(?=)/g;
        let headings = [];
        lines.forEach((line) => {
          const match = line.match(regXHeader);
          if (match)
            headings.push(match[0].replace(/#{1,6}\s/g, ""));
          else
            headings.push("-1");
        });
        return headings;
      }
    });
  }
  getLinkTagLocationsInFile(activeFileView, filePath, tag) {
    return __async(this, null, function* () {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian.TFile) {
        const fileContent = yield this.app.vault.read(file);
        const lines = fileContent.split("\n");
        let lineContent = [];
        const activeFileName = activeFileView.file.name.substring(0, activeFileView.file.name.length - 3);
        let toSearch = "";
        if (!tag) {
          toSearch = "[[" + activeFileName + "]]";
        } else
          toSearch = tag;
        lines.forEach((line) => {
          if (line.includes(toSearch))
            lineContent.push(toSearch);
          else
            lineContent.push("-1");
        });
        let toReturn = [];
        for (let i = 0; i < lineContent.length; i++) {
          if (lineContent[i] === toSearch)
            toReturn.push(i);
        }
        return toReturn;
      }
    });
  }
  determineClosestHeading(headingsLocations, linkTagLocation) {
    let distances = [];
    headingsLocations.forEach((item, index) => {
      if (item != "-1")
        distances.push(Math.abs(index - linkTagLocation));
      else
        distances.push(-1);
    });
    let minIndex = -1;
    let minValue = Infinity;
    for (let i = 0; i < distances.length; i += 1) {
      if (distances[i] != -1) {
        if (distances[i] < minValue) {
          minIndex = i;
          minValue = distances[i];
        }
      }
    }
    if (minIndex === linkTagLocation) {
      headingsLocations[minIndex] = headingsLocations[minIndex].replace(/#/g, "").trim();
    }
    return headingsLocations[minIndex];
  }
  runAutoMOC(tag) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (view != null && view.file.extension === "md") {
      if (this.settings.linkingMentionsNotice)
        new import_obsidian.Notice("Linking mentions");
      const presentLinks = this.getPresentLinks(view.file.path);
      let linkTagMentions;
      if (!tag) {
        linkTagMentions = this.getLinkedMentions(view.file.path);
      } else {
        linkTagMentions = this.getTaggedMentions(tag);
      }
      this.addMissingLinks(view, presentLinks, linkTagMentions, tag);
    } else {
      new import_obsidian.Notice("Failed to link mentions, file type is not a markdown file");
    }
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      if (this.settings.showRibbonButton) {
        const ribbonIconEl = this.addRibbonIcon("sheets-in-box", "AutoMOC", (evt) => {
          this.runAutoMOC();
        });
      }
      this.addCommand({
        id: "add-missing-linked-mentions",
        name: "Add missing linked mentions at the cursor position",
        editorCallback: (editor, view) => {
          this.runAutoMOC();
        }
      });
      this.addCommand({
        id: "add-missing-notes-by-tag",
        name: "Add missing notes with specific tag at the current cursor location",
        editorCallback: (editor, view) => {
          new TagSuggestModal(this.app, this).open();
        }
      });
      this.addSettingTab(new AutoMOCSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var AutoMOCSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Functionality" });
    new import_obsidian.Setting(containerEl).setName("Show ribbon button").setDesc("Enable or disable the ribbon button for this plugin. You can still run the plugin with a hotkey (requires restart)").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showRibbonButton).onChange((showRibbonButton) => {
        this.plugin.settings.showRibbonButton = showRibbonButton;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Link to heading").setDesc("Creates the link to the heading closest to the link/tag. This is performed in a greedy manner").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.linkToHeading).onChange((linkToHeading) => {
        this.plugin.settings.linkToHeading = linkToHeading;
        this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: "Notifications" });
    new import_obsidian.Setting(containerEl).setName("Linking mentions").setDesc("Enable or disable notifications for when AutoMoc begins to run").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.linkingMentionsNotice).onChange((value) => {
        this.plugin.settings.linkingMentionsNotice = value;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("New links added").setDesc("Enable or disable notifications for when new links are added to a note").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.newLinksAddedNotice).onChange((value) => {
        this.plugin.settings.newLinksAddedNotice = value;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("No new links found").setDesc("Enable or disable notifications for when no new links are added to a note").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.noNewLinksNotice).onChange((value) => {
        this.plugin.settings.noNewLinksNotice = value;
        this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0RWRpdG9yLFxyXG5cdE1hcmtkb3duVmlldyxcclxuXHROb3RpY2UsXHJcblx0UGx1Z2luLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsXHJcblx0U2V0dGluZyxcclxuXHRURmlsZSxcclxuXHRGdXp6eVN1Z2dlc3RNb2RhbCxcclxufSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmludGVyZmFjZSBBdXRvTU9DU2V0dGluZ3Mge1xyXG5cdHNob3dSaWJib25CdXR0b246IGJvb2xlYW47XHJcblx0bGlua1RvSGVhZGluZzogYm9vbGVhbjtcclxuXHJcblx0Ly9ub3RpZmljYXRpb25zXHJcblx0bGlua2luZ01lbnRpb25zTm90aWNlOiBib29sZWFuO1xyXG5cdG5vTmV3TGlua3NOb3RpY2U6IGJvb2xlYW47XHJcblx0bmV3TGlua3NBZGRlZE5vdGljZTogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQXV0b01PQ1NldHRpbmdzID0ge1xyXG5cdHNob3dSaWJib25CdXR0b246IHRydWUsXHJcblx0bGlua1RvSGVhZGluZzogZmFsc2UsXHJcblxyXG5cdC8vbm90aWZpY2F0aW9uc1xyXG5cdGxpbmtpbmdNZW50aW9uc05vdGljZTogdHJ1ZSxcclxuXHRub05ld0xpbmtzTm90aWNlOiB0cnVlLFxyXG5cdG5ld0xpbmtzQWRkZWROb3RpY2U6IGZhbHNlLFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ1N1Z2dlc3RNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG5cdHNlbGVjdGlvbjogc3RyaW5nO1xyXG5cdHBsdWdpbjogQXV0b01PQztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQXV0b01PQykge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXRQbGFjZWhvbGRlcihcIkltcG9ydCBub3RlcyB3aXRoIHRhZ3MgbWF0Y2hpbmcuLi5cIik7XHJcblx0XHR0aGlzLnNldEluc3RydWN0aW9ucyhbXHJcblx0XHRcdHsgY29tbWFuZDogXCJcdTIxOTFcdTIxOTNcIiwgcHVycG9zZTogXCJ0byBuYXZpZ2F0ZVwiIH0sXHJcblx0XHRcdHsgY29tbWFuZDogXCJcdTIxQjVcIiwgcHVycG9zZTogXCJ0byBzZWxlY3QgdGFnXCIgfSxcclxuXHRcdFx0eyBjb21tYW5kOiBcImVzY1wiLCBwdXJwb3NlOiBcInRvIGRpc21pc3NcIiB9LFxyXG5cdFx0XSk7XHJcblxyXG5cdFx0dGhpcy5pbnB1dEVsLmZvY3VzKCk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0bGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBzdHJpbmdbXSB7XHJcblx0XHRjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcztcclxuXHRcdGxldCB0YWdzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblxyXG5cdFx0T2JqZWN0LmtleXMoYWxsRmlsZXMpLmZvckVhY2goKGtleSkgPT4ge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGtleSk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRjb25zdCBib2R5X3RhZ3MgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkudGFncztcclxuXHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9XHJcblx0XHRcdFx0XHR0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlcjtcclxuXHJcblx0XHRcdFx0aWYgKGJvZHlfdGFncykge1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCB0YWcgb2YgYm9keV90YWdzKSB7XHJcblx0XHRcdFx0XHRcdHRhZ3NTZXQuYWRkKHRhZ1tcInRhZ1wiXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRsZXQgZl90YWdzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShmcm9udG1hdHRlcltcInRhZ3NcIl0pKSB7XHJcblx0XHRcdFx0XHRcdGZfdGFncyA9IGZyb250bWF0dGVyW1widGFnc1wiXTtcclxuXHJcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgZl90YWcgb2YgZl90YWdzKSB7XHJcblx0XHRcdFx0XHRcdFx0dGFnc1NldC5hZGQoXCIjXCIgKyBmX3RhZyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChTdHJpbmcuaXNTdHJpbmcoZnJvbnRtYXR0ZXJbXCJ0YWdzXCJdKSkge1xyXG5cdFx0XHRcdFx0XHRmX3RhZ3MgPSBmcm9udG1hdHRlcltcInRhZ3NcIl0uc3BsaXQoXCIsIFwiKTtcclxuXHJcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgZl90YWcgb2YgZl90YWdzKSB7XHJcblx0XHRcdFx0XHRcdFx0dGFnc1NldC5hZGQoXCIjXCIgKyBmX3RhZyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBBcnJheS5mcm9tKHRhZ3NTZXQpLnNvcnQoKTtcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gaXRlbTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2VsZWN0aW9uID0gaXRlbTtcclxuXHRcdHRoaXMucGx1Z2luLnJ1bkF1dG9NT0MoaXRlbSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRvTU9DIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogQXV0b01PQ1NldHRpbmdzO1xyXG5cclxuXHRnZXRQcmVzZW50TGlua3MoY3VyckZpbGVQYXRoOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xyXG5cdFx0Y29uc3QgcHJlc2VudExpbmtzID0gT2JqZWN0LmtleXMoYWxsRmlsZXNbY3VyckZpbGVQYXRoXSk7XHJcblxyXG5cdFx0cmV0dXJuIHByZXNlbnRMaW5rcy5zb3J0KCk7XHJcblx0fVxyXG5cclxuXHRnZXRMaW5rZWRNZW50aW9ucyhjdXJyRmlsZVBhdGg6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3M7XHJcblx0XHRsZXQgbGlua2VkTWVudGlvbnM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuXHJcblx0XHRPYmplY3Qua2V5cyhhbGxGaWxlcykuZm9yRWFjaCgoa2V5KSA9PiB7XHJcblx0XHRcdGlmIChjdXJyRmlsZVBhdGggaW4gYWxsRmlsZXNba2V5XSkge1xyXG5cdFx0XHRcdGxpbmtlZE1lbnRpb25zLnB1c2goa2V5KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGxpbmtlZE1lbnRpb25zLnNvcnQoKTtcclxuXHR9XHJcblxyXG5cdGdldFRhZ2dlZE1lbnRpb25zKHRhZzogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcztcclxuXHRcdGxldCB0YWdnZWRNZW50aW9uczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cdFx0Y29uc3QgdG9Db21wYXJlID0gdGFnLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xyXG5cclxuXHRcdE9iamVjdC5rZXlzKGFsbEZpbGVzKS5mb3JFYWNoKChrZXkpID0+IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChrZXkpO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0Y29uc3QgYm9keV90YWdzID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpLnRhZ3M7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPVxyXG5cdFx0XHRcdFx0dGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkuZnJvbnRtYXR0ZXI7XHJcblxyXG5cdFx0XHRcdGlmIChib2R5X3RhZ3MpIHtcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgdGFnIG9mIGJvZHlfdGFncykge1xyXG5cdFx0XHRcdFx0XHRpZiAodGFnW1widGFnXCJdLnJlcGxhY2UoXCIjXCIsIFwiXCIpID09PSB0b0NvbXBhcmUpIHtcclxuXHRcdFx0XHRcdFx0XHR0YWdnZWRNZW50aW9ucy5wdXNoKGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0bGV0IGZfdGFnczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZnJvbnRtYXR0ZXJbXCJ0YWdzXCJdKSkge1xyXG5cdFx0XHRcdFx0XHRmX3RhZ3MgPSBmcm9udG1hdHRlcltcInRhZ3NcIl07XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGZfdGFnIG9mIGZfdGFncykge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmX3RhZyA9PT0gdG9Db21wYXJlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0YWdnZWRNZW50aW9ucy5wdXNoKGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoU3RyaW5nLmlzU3RyaW5nKGZyb250bWF0dGVyW1widGFnc1wiXSkpIHtcclxuXHRcdFx0XHRcdFx0Zl90YWdzID0gZnJvbnRtYXR0ZXJbXCJ0YWdzXCJdLnNwbGl0KFwiLCBcIik7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGZfdGFnIG9mIGZfdGFncykge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmX3RhZyA9PT0gdG9Db21wYXJlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0YWdnZWRNZW50aW9ucy5wdXNoKGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCB1bmlxdWVUYWdnZWRNZW50aW9ucyA9IHRhZ2dlZE1lbnRpb25zLmZpbHRlcihcclxuXHRcdFx0KHZhbHVlLCBpbmRleCwgYXJyYXkpID0+IGFycmF5LmluZGV4T2YodmFsdWUpID09PSBpbmRleFxyXG5cdFx0KTtcclxuXHJcblx0XHRyZXR1cm4gdW5pcXVlVGFnZ2VkTWVudGlvbnM7XHJcblx0fVxyXG5cclxuXHRhc3luYyBhZGRNaXNzaW5nTGlua3MoXHJcblx0XHRhY3RpdmVGaWxlVmlldzogTWFya2Rvd25WaWV3LFxyXG5cdFx0cHJlc2VudExpbmtzOiBBcnJheTxzdHJpbmc+LFxyXG5cdFx0YWxsTGlua2VkTWVudGlvbnM6IEFycmF5PHN0cmluZz4sXHJcblx0XHR0YWc/OiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdGxldCBhZGRGbGFnID0gZmFsc2U7XHJcblxyXG5cdFx0Ly9jaGVja3MgZm9yIG1pc3NpbmcgbGlua3MgYW5kIGFkZHMgdGhlbVxyXG5cdFx0Zm9yIChjb25zdCBwYXRoIG9mIGFsbExpbmtlZE1lbnRpb25zKSB7XHJcblx0XHRcdGlmICghcHJlc2VudExpbmtzLmluY2x1ZGVzKHBhdGgpKSB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuXHJcblx0XHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0Ly9jaGVjayBmb3IgYWxpYXNlc1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZUFsaWFzZXMgPVxyXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlcjtcclxuXHRcdFx0XHRcdGxldCBhbGlhcyA9IFwiXCI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0XHRmaWxlQWxpYXNlcyAmJlxyXG5cdFx0XHRcdFx0XHRBcnJheS5pc0FycmF5KGZpbGVBbGlhc2VzW1wiYWxpYXNlc1wiXSkgJiZcclxuXHRcdFx0XHRcdFx0ZmlsZUFsaWFzZXNbXCJhbGlhc2VzXCJdLmxlbmd0aCA+IDBcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRhbGlhcyA9IFwifFwiICsgZmlsZUFsaWFzZXMuYWxpYXNlc1swXTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRsZXQgY2xvc2VzdEhlYWRpbmcgPSBcIlwiO1xyXG5cdFx0XHRcdFx0bGV0IGFsbEhlYWRpbmdzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MubGlua1RvSGVhZGluZykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBoZWFkaW5nc0xvY2F0aW9ucyA9XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5nZXRIZWFkaW5nc0xvY2F0aW9uc0luRmlsZShwYXRoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua1RhZ0xvY2F0aW9ucyA9XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5nZXRMaW5rVGFnTG9jYXRpb25zSW5GaWxlKFxyXG5cdFx0XHRcdFx0XHRcdFx0YWN0aXZlRmlsZVZpZXcsXHJcblx0XHRcdFx0XHRcdFx0XHRwYXRoLFxyXG5cdFx0XHRcdFx0XHRcdFx0dGFnXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rVGFnTG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0Y2xvc2VzdEhlYWRpbmcgPSB0aGlzLmRldGVybWluZUNsb3Nlc3RIZWFkaW5nKFxyXG5cdFx0XHRcdFx0XHRcdFx0aGVhZGluZ3NMb2NhdGlvbnMsXHJcblx0XHRcdFx0XHRcdFx0XHRsaW5rVGFnTG9jYXRpb25zW2ldXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRhbGxIZWFkaW5ncy5wdXNoKGNsb3Nlc3RIZWFkaW5nKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmIChhbGxIZWFkaW5ncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdC8vaWYgdGhlcmUgaXMgYSBjbG9zZXN0IGhlYWRpbmcsIGxpbmsgdG8gaGVhZGluZ1xyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFsbEhlYWRpbmdzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0YWN0aXZlRmlsZVZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0YWN0aXZlRmlsZVZpZXcuZmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcIiNcIiArIGFsbEhlYWRpbmdzW2ldLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQoYWxpYXMgPSBhbGlhcylcclxuXHRcdFx0XHRcdFx0XHRcdCkgKyBcIlxcblwiXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly9vdGhlcndpc2UganVzdCBsaW5rIHRvIG5vdGUgd2l0aG91dCBoZWFkaW5nXHJcblx0XHRcdFx0XHRcdGFjdGl2ZUZpbGVWaWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYXBwLmZpbGVNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKFxyXG5cdFx0XHRcdFx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRcdFx0XHRcdGFjdGl2ZUZpbGVWaWV3LmZpbGUucGF0aCxcclxuXHRcdFx0XHRcdFx0XHRcdChhbGlhcyA9IGFsaWFzKVxyXG5cdFx0XHRcdFx0XHRcdCkgKyBcIlxcblwiXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0YWRkRmxhZyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubmV3TGlua3NBZGRlZE5vdGljZSAmJiBhZGRGbGFnKVxyXG5cdFx0XHRuZXcgTm90aWNlKFwiTmV3IGxpbmtzIGFkZGVkIHRvIG5vdGVcIik7XHJcblx0XHRlbHNlIGlmICh0aGlzLnNldHRpbmdzLm5vTmV3TGlua3NOb3RpY2UgJiYgIWFkZEZsYWcpXHJcblx0XHRcdG5ldyBOb3RpY2UoXCJObyBuZXcgbGlua3MgZm91bmRcIik7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRIZWFkaW5nc0xvY2F0aW9uc0luRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHJcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdFx0Y29uc3QgbGluZXMgPSBmaWxlQ29udGVudC5zcGxpdChcIlxcblwiKTtcclxuXHRcdFx0Y29uc3QgcmVnWEhlYWRlciA9IC8jezEsNn1cXHMuKyg/PSkvZztcclxuXHRcdFx0bGV0IGhlYWRpbmdzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG5cdFx0XHRsaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKHJlZ1hIZWFkZXIpO1xyXG5cdFx0XHRcdGlmIChtYXRjaCkgaGVhZGluZ3MucHVzaChtYXRjaFswXS5yZXBsYWNlKC8jezEsNn1cXHMvZywgXCJcIikpO1xyXG5cdFx0XHRcdGVsc2UgaGVhZGluZ3MucHVzaChcIi0xXCIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBoZWFkaW5ncztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldExpbmtUYWdMb2NhdGlvbnNJbkZpbGUoXHJcblx0XHRhY3RpdmVGaWxlVmlldzogTWFya2Rvd25WaWV3LFxyXG5cdFx0ZmlsZVBhdGg6IHN0cmluZyxcclxuXHRcdHRhZz86IHN0cmluZ1xyXG5cdCkge1xyXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblxyXG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRcdGNvbnN0IGxpbmVzID0gZmlsZUNvbnRlbnQuc3BsaXQoXCJcXG5cIik7XHJcblx0XHRcdGxldCBsaW5lQ29udGVudDogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cdFx0XHRjb25zdCBhY3RpdmVGaWxlTmFtZSA9IGFjdGl2ZUZpbGVWaWV3LmZpbGUubmFtZS5zdWJzdHJpbmcoXHJcblx0XHRcdFx0MCxcclxuXHRcdFx0XHRhY3RpdmVGaWxlVmlldy5maWxlLm5hbWUubGVuZ3RoIC0gM1xyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0bGV0IHRvU2VhcmNoID0gXCJcIjtcclxuXHRcdFx0aWYgKCF0YWcpIHtcclxuXHRcdFx0XHR0b1NlYXJjaCA9IFwiW1tcIiArIGFjdGl2ZUZpbGVOYW1lICsgXCJdXVwiOyAvLyAtMyBpbiBvcmRlciB0byByZW1vdmUgXCIubWRcIiBmcm9tIGZpbGVwYXRoXHJcblx0XHRcdH0gZWxzZSB0b1NlYXJjaCA9IHRhZztcclxuXHJcblx0XHRcdGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcclxuXHRcdFx0XHRpZiAobGluZS5pbmNsdWRlcyh0b1NlYXJjaCkpIGxpbmVDb250ZW50LnB1c2godG9TZWFyY2gpO1xyXG5cdFx0XHRcdGVsc2UgbGluZUNvbnRlbnQucHVzaChcIi0xXCIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGxldCB0b1JldHVybjogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVDb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKGxpbmVDb250ZW50W2ldID09PSB0b1NlYXJjaCkgdG9SZXR1cm4ucHVzaChpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRvUmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZGV0ZXJtaW5lQ2xvc2VzdEhlYWRpbmcoXHJcblx0XHRoZWFkaW5nc0xvY2F0aW9uczogQXJyYXk8c3RyaW5nPixcclxuXHRcdGxpbmtUYWdMb2NhdGlvbjogbnVtYmVyXHJcblx0KSB7XHJcblx0XHRsZXQgZGlzdGFuY2VzOiBBcnJheTxudW1iZXI+ID0gW107XHJcblxyXG5cdFx0aGVhZGluZ3NMb2NhdGlvbnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuXHRcdFx0aWYgKGl0ZW0gIT0gXCItMVwiKSBkaXN0YW5jZXMucHVzaChNYXRoLmFicyhpbmRleCAtIGxpbmtUYWdMb2NhdGlvbikpO1xyXG5cdFx0XHRlbHNlIGRpc3RhbmNlcy5wdXNoKC0xKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGxldCBtaW5JbmRleCA9IC0xO1xyXG5cdFx0bGV0IG1pblZhbHVlID0gSW5maW5pdHk7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGRpc3RhbmNlcy5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHRpZiAoZGlzdGFuY2VzW2ldICE9IC0xKSB7XHJcblx0XHRcdFx0aWYgKGRpc3RhbmNlc1tpXSA8IG1pblZhbHVlKSB7XHJcblx0XHRcdFx0XHRtaW5JbmRleCA9IGk7XHJcblx0XHRcdFx0XHRtaW5WYWx1ZSA9IGRpc3RhbmNlc1tpXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAobWluSW5kZXggPT09IGxpbmtUYWdMb2NhdGlvbikge1xyXG5cdFx0XHRoZWFkaW5nc0xvY2F0aW9uc1ttaW5JbmRleF0gPSBoZWFkaW5nc0xvY2F0aW9uc1ttaW5JbmRleF1cclxuXHRcdFx0XHQucmVwbGFjZSgvIy9nLCBcIlwiKVxyXG5cdFx0XHRcdC50cmltKCk7IC8vIG5lZWQgdG8gZXhwbGljaXRseSByZW1vdmUgYWxsIHRhZ3MgZnJvbSBuYW1lIGFuZCB0cmltIHRyYWlsaW5nIHdoaXRlc3BhY2VzXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGhlYWRpbmdzTG9jYXRpb25zW21pbkluZGV4XTtcclxuXHR9XHJcblxyXG5cdHJ1bkF1dG9NT0ModGFnPzogc3RyaW5nKSB7XHJcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHJcblx0XHRpZiAodmlldyAhPSBudWxsICYmIHZpZXcuZmlsZS5leHRlbnNpb24gPT09IFwibWRcIikge1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5saW5raW5nTWVudGlvbnNOb3RpY2UpXHJcblx0XHRcdFx0bmV3IE5vdGljZShcIkxpbmtpbmcgbWVudGlvbnNcIik7XHJcblxyXG5cdFx0XHRjb25zdCBwcmVzZW50TGlua3MgPSB0aGlzLmdldFByZXNlbnRMaW5rcyh2aWV3LmZpbGUucGF0aCk7IC8vIGxpbmtzIGFscmVhZHkgaW4gdGhlIGRvY3VtZW50XHJcblxyXG5cdFx0XHRsZXQgbGlua1RhZ01lbnRpb25zOiBBcnJheTxzdHJpbmc+O1xyXG5cdFx0XHRpZiAoIXRhZykge1xyXG5cdFx0XHRcdGxpbmtUYWdNZW50aW9ucyA9IHRoaXMuZ2V0TGlua2VkTWVudGlvbnModmlldy5maWxlLnBhdGgpOyAvLyBhbGwgbGlua2VkIG1lbnRpb25zIGV2ZW4gdGhvc2Ugbm90IHByZXNlbnRcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsaW5rVGFnTWVudGlvbnMgPSB0aGlzLmdldFRhZ2dlZE1lbnRpb25zKHRhZyk7IC8vIHRhZ2dlZCBtZW50aW9ucyBhcmUgbG9va2VkIHVwIGJ5IGJhc2VuYW1lIHJhdGhlciB0aGFuIHBhdGhcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5hZGRNaXNzaW5nTGlua3ModmlldywgcHJlc2VudExpbmtzLCBsaW5rVGFnTWVudGlvbnMsIHRhZyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRuZXcgTm90aWNlKFxyXG5cdFx0XHRcdFwiRmFpbGVkIHRvIGxpbmsgbWVudGlvbnMsIGZpbGUgdHlwZSBpcyBub3QgYSBtYXJrZG93biBmaWxlXCJcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd1JpYmJvbkJ1dHRvbikge1xyXG5cdFx0XHRjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oXHJcblx0XHRcdFx0XCJzaGVldHMtaW4tYm94XCIsXHJcblx0XHRcdFx0XCJBdXRvTU9DXCIsXHJcblx0XHRcdFx0KGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5ydW5BdXRvTU9DKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImFkZC1taXNzaW5nLWxpbmtlZC1tZW50aW9uc1wiLFxyXG5cdFx0XHRuYW1lOiBcIkFkZCBtaXNzaW5nIGxpbmtlZCBtZW50aW9ucyBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uXCIsXHJcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xyXG5cdFx0XHRcdHRoaXMucnVuQXV0b01PQygpO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiYWRkLW1pc3Npbmctbm90ZXMtYnktdGFnXCIsXHJcblx0XHRcdG5hbWU6IFwiQWRkIG1pc3Npbmcgbm90ZXMgd2l0aCBzcGVjaWZpYyB0YWcgYXQgdGhlIGN1cnJlbnQgY3Vyc29yIGxvY2F0aW9uXCIsXHJcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xyXG5cdFx0XHRcdG5ldyBUYWdTdWdnZXN0TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQXV0b01PQ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge31cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXHJcblx0XHRcdHt9LFxyXG5cdFx0XHRERUZBVUxUX1NFVFRJTkdTLFxyXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKClcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgQXV0b01PQ1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IEF1dG9NT0M7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEF1dG9NT0MpIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJGdW5jdGlvbmFsaXR5XCIgfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiU2hvdyByaWJib24gYnV0dG9uXCIpXHJcblx0XHRcdC5zZXREZXNjKFxyXG5cdFx0XHRcdFwiRW5hYmxlIG9yIGRpc2FibGUgdGhlIHJpYmJvbiBidXR0b24gZm9yIHRoaXMgcGx1Z2luLiBZb3UgY2FuIHN0aWxsIHJ1biB0aGUgcGx1Z2luIHdpdGggYSBob3RrZXkgKHJlcXVpcmVzIHJlc3RhcnQpXCJcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UmliYm9uQnV0dG9uKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKChzaG93UmliYm9uQnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dSaWJib25CdXR0b24gPVxyXG5cdFx0XHRcdFx0XHRcdHNob3dSaWJib25CdXR0b247XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkxpbmsgdG8gaGVhZGluZ1wiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRcIkNyZWF0ZXMgdGhlIGxpbmsgdG8gdGhlIGhlYWRpbmcgY2xvc2VzdCB0byB0aGUgbGluay90YWcuIFRoaXMgaXMgcGVyZm9ybWVkIGluIGEgZ3JlZWR5IG1hbm5lclwiXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlua1RvSGVhZGluZylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgobGlua1RvSGVhZGluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW5rVG9IZWFkaW5nID0gbGlua1RvSGVhZGluZztcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiTm90aWZpY2F0aW9uc1wiIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkxpbmtpbmcgbWVudGlvbnNcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XCJFbmFibGUgb3IgZGlzYWJsZSBub3RpZmljYXRpb25zIGZvciB3aGVuIEF1dG9Nb2MgYmVnaW5zIHRvIHJ1blwiXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlua2luZ01lbnRpb25zTm90aWNlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW5raW5nTWVudGlvbnNOb3RpY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTmV3IGxpbmtzIGFkZGVkXCIpXHJcblx0XHRcdC5zZXREZXNjKFxyXG5cdFx0XHRcdFwiRW5hYmxlIG9yIGRpc2FibGUgbm90aWZpY2F0aW9ucyBmb3Igd2hlbiBuZXcgbGlua3MgYXJlIGFkZGVkIHRvIGEgbm90ZVwiXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3TGlua3NBZGRlZE5vdGljZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3TGlua3NBZGRlZE5vdGljZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJObyBuZXcgbGlua3MgZm91bmRcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XCJFbmFibGUgb3IgZGlzYWJsZSBub3RpZmljYXRpb25zIGZvciB3aGVuIG5vIG5ldyBsaW5rcyBhcmUgYWRkZWQgdG8gYSBub3RlXCJcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub05ld0xpbmtzTm90aWNlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub05ld0xpbmtzTm90aWNlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBVU87QUFZUCxJQUFNLG1CQUFvQztBQUFBLEVBQ3pDLGtCQUFrQjtBQUFBLEVBQ2xCLGVBQWU7QUFBQSxFQUdmLHVCQUF1QjtBQUFBLEVBQ3ZCLGtCQUFrQjtBQUFBLEVBQ2xCLHFCQUFxQjtBQUFBO0FBR2Ysb0NBQThCLGtDQUEwQjtBQUFBLEVBSTlELFlBQVksTUFBVSxRQUFpQjtBQUN0QyxVQUFNO0FBQ04sU0FBSyxTQUFTO0FBQUE7QUFBQSxFQUdmLFNBQWU7QUFDZCxTQUFLLGVBQWU7QUFDcEIsU0FBSyxnQkFBZ0I7QUFBQSxNQUNwQixFQUFFLFNBQVMsZ0JBQU0sU0FBUztBQUFBLE1BQzFCLEVBQUUsU0FBUyxVQUFLLFNBQVM7QUFBQSxNQUN6QixFQUFFLFNBQVMsT0FBTyxTQUFTO0FBQUE7QUFHNUIsU0FBSyxRQUFRO0FBQUE7QUFBQSxFQUdkLFVBQVU7QUFDVCxRQUFJLEVBQUUsY0FBYztBQUNwQixjQUFVO0FBQUE7QUFBQSxFQUdYLFdBQXFCO0FBQ3BCLFVBQU0sV0FBVyxLQUFLLElBQUksY0FBYztBQUN4QyxRQUFJLFVBQVUsSUFBSTtBQUVsQixXQUFPLEtBQUssVUFBVSxRQUFRLENBQUMsUUFBUTtBQUN0QyxZQUFNLE9BQU8sS0FBSyxJQUFJLE1BQU0sc0JBQXNCO0FBQ2xELFVBQUksZ0JBQWdCLHVCQUFPO0FBQzFCLGNBQU0sWUFBWSxJQUFJLGNBQWMsYUFBYSxNQUFNO0FBQ3ZELGNBQU0sY0FDTCxLQUFLLElBQUksY0FBYyxhQUFhLE1BQU07QUFFM0MsWUFBSSxXQUFXO0FBQ2QscUJBQVcsT0FBTyxXQUFXO0FBQzVCLG9CQUFRLElBQUksSUFBSTtBQUFBO0FBQUE7QUFJbEIsWUFBSSxTQUF3QjtBQUM1QixZQUFJLGFBQWE7QUFDaEIsY0FBSSxNQUFNLFFBQVEsWUFBWSxVQUFVO0FBQ3ZDLHFCQUFTLFlBQVk7QUFFckIsdUJBQVcsU0FBUyxRQUFRO0FBQzNCLHNCQUFRLElBQUksTUFBTTtBQUFBO0FBQUE7QUFHcEIsY0FBSSxPQUFPLFNBQVMsWUFBWSxVQUFVO0FBQ3pDLHFCQUFTLFlBQVksUUFBUSxNQUFNO0FBRW5DLHVCQUFXLFNBQVMsUUFBUTtBQUMzQixzQkFBUSxJQUFJLE1BQU07QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT3ZCLFdBQU8sTUFBTSxLQUFLLFNBQVM7QUFBQTtBQUFBLEVBRzVCLFlBQVksTUFBc0I7QUFDakMsV0FBTztBQUFBO0FBQUEsRUFHUixhQUFhLE1BQWMsS0FBdUM7QUFDakUsU0FBSyxZQUFZO0FBQ2pCLFNBQUssT0FBTyxXQUFXO0FBQUE7QUFBQTtBQUl6Qiw0QkFBcUMsdUJBQU87QUFBQSxFQUczQyxnQkFBZ0IsY0FBc0I7QUFDckMsVUFBTSxXQUFXLEtBQUssSUFBSSxjQUFjO0FBQ3hDLFVBQU0sZUFBZSxPQUFPLEtBQUssU0FBUztBQUUxQyxXQUFPLGFBQWE7QUFBQTtBQUFBLEVBR3JCLGtCQUFrQixjQUFzQjtBQUN2QyxVQUFNLFdBQVcsS0FBSyxJQUFJLGNBQWM7QUFDeEMsUUFBSSxpQkFBZ0M7QUFFcEMsV0FBTyxLQUFLLFVBQVUsUUFBUSxDQUFDLFFBQVE7QUFDdEMsVUFBSSxnQkFBZ0IsU0FBUyxNQUFNO0FBQ2xDLHVCQUFlLEtBQUs7QUFBQTtBQUFBO0FBSXRCLFdBQU8sZUFBZTtBQUFBO0FBQUEsRUFHdkIsa0JBQWtCLEtBQWE7QUFDOUIsVUFBTSxXQUFXLEtBQUssSUFBSSxjQUFjO0FBQ3hDLFFBQUksaUJBQWdDO0FBQ3BDLFVBQU0sWUFBWSxJQUFJLFFBQVEsS0FBSztBQUVuQyxXQUFPLEtBQUssVUFBVSxRQUFRLENBQUMsUUFBUTtBQUN0QyxZQUFNLE9BQU8sS0FBSyxJQUFJLE1BQU0sc0JBQXNCO0FBQ2xELFVBQUksZ0JBQWdCLHVCQUFPO0FBQzFCLGNBQU0sWUFBWSxJQUFJLGNBQWMsYUFBYSxNQUFNO0FBQ3ZELGNBQU0sY0FDTCxLQUFLLElBQUksY0FBYyxhQUFhLE1BQU07QUFFM0MsWUFBSSxXQUFXO0FBQ2QscUJBQVcsUUFBTyxXQUFXO0FBQzVCLGdCQUFJLEtBQUksT0FBTyxRQUFRLEtBQUssUUFBUSxXQUFXO0FBQzlDLDZCQUFlLEtBQUssS0FBSztBQUFBO0FBQUE7QUFBQTtBQUs1QixZQUFJLGFBQWE7QUFDaEIsY0FBSSxTQUF3QjtBQUM1QixjQUFJLE1BQU0sUUFBUSxZQUFZLFVBQVU7QUFDdkMscUJBQVMsWUFBWTtBQUVyQix1QkFBVyxTQUFTLFFBQVE7QUFDM0Isa0JBQUksVUFBVSxXQUFXO0FBQ3hCLCtCQUFlLEtBQUssS0FBSztBQUFBO0FBQUE7QUFBQTtBQUk1QixjQUFJLE9BQU8sU0FBUyxZQUFZLFVBQVU7QUFDekMscUJBQVMsWUFBWSxRQUFRLE1BQU07QUFFbkMsdUJBQVcsU0FBUyxRQUFRO0FBQzNCLGtCQUFJLFVBQVUsV0FBVztBQUN4QiwrQkFBZSxLQUFLLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRL0IsVUFBTSx1QkFBdUIsZUFBZSxPQUMzQyxDQUFDLE9BQU8sT0FBTyxVQUFVLE1BQU0sUUFBUSxXQUFXO0FBR25ELFdBQU87QUFBQTtBQUFBLEVBR0YsZ0JBQ0wsZ0JBQ0EsY0FDQSxtQkFDQSxLQUNDO0FBQUE7QUFDRCxVQUFJLFVBQVU7QUFHZCxpQkFBVyxRQUFRLG1CQUFtQjtBQUNyQyxZQUFJLENBQUMsYUFBYSxTQUFTLE9BQU87QUFDakMsZ0JBQU0sT0FBTyxLQUFLLElBQUksTUFBTSxzQkFBc0I7QUFFbEQsY0FBSSxnQkFBZ0IsdUJBQU87QUFFMUIsa0JBQU0sY0FDTCxLQUFLLElBQUksY0FBYyxhQUFhLE1BQU07QUFDM0MsZ0JBQUksUUFBUTtBQUVaLGdCQUNDLGVBQ0EsTUFBTSxRQUFRLFlBQVksZUFDMUIsWUFBWSxXQUFXLFNBQVMsR0FDL0I7QUFDRCxzQkFBUSxNQUFNLFlBQVksUUFBUTtBQUFBO0FBR25DLGdCQUFJLGlCQUFpQjtBQUNyQixnQkFBSSxjQUE2QjtBQUVqQyxnQkFBSSxLQUFLLFNBQVMsZUFBZTtBQUNoQyxvQkFBTSxvQkFDTCxNQUFNLEtBQUssMkJBQTJCO0FBQ3ZDLG9CQUFNLG1CQUNMLE1BQU0sS0FBSywwQkFDVixnQkFDQSxNQUNBO0FBRUYsdUJBQVMsSUFBSSxHQUFHLElBQUksaUJBQWlCLFFBQVEsS0FBSztBQUNqRCxpQ0FBaUIsS0FBSyx3QkFDckIsbUJBQ0EsaUJBQWlCO0FBRWxCLDRCQUFZLEtBQUs7QUFBQTtBQUFBO0FBSW5CLGdCQUFJLFlBQVksU0FBUyxHQUFHO0FBRTNCLHVCQUFTLElBQUksR0FBRyxJQUFJLFlBQVksUUFBUSxLQUFLO0FBQzVDLCtCQUFlLE9BQU8saUJBQ3JCLEtBQUssSUFBSSxZQUFZLHFCQUNwQixNQUNBLGVBQWUsS0FBSyxNQUNwQixNQUFNLFlBQVksSUFDakIsUUFBUSxTQUNOO0FBQUE7QUFBQSxtQkFHQTtBQUVOLDZCQUFlLE9BQU8saUJBQ3JCLEtBQUssSUFBSSxZQUFZLHFCQUNwQixNQUNBLGVBQWUsS0FBSyxNQUNuQixRQUFRLFNBQ047QUFBQTtBQUlOLHNCQUFVO0FBQUE7QUFBQTtBQUFBO0FBS2IsVUFBSSxLQUFLLFNBQVMsdUJBQXVCO0FBQ3hDLFlBQUksdUJBQU87QUFBQSxlQUNILEtBQUssU0FBUyxvQkFBb0IsQ0FBQztBQUMzQyxZQUFJLHVCQUFPO0FBQUE7QUFBQTtBQUFBLEVBR1AsMkJBQTJCLFVBQWtCO0FBQUE7QUFDbEQsWUFBTSxPQUFPLEtBQUssSUFBSSxNQUFNLHNCQUFzQjtBQUVsRCxVQUFJLGdCQUFnQix1QkFBTztBQUMxQixjQUFNLGNBQWMsTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLO0FBQzlDLGNBQU0sUUFBUSxZQUFZLE1BQU07QUFDaEMsY0FBTSxhQUFhO0FBQ25CLFlBQUksV0FBMEI7QUFFOUIsY0FBTSxRQUFRLENBQUMsU0FBUztBQUN2QixnQkFBTSxRQUFRLEtBQUssTUFBTTtBQUN6QixjQUFJO0FBQU8scUJBQVMsS0FBSyxNQUFNLEdBQUcsUUFBUSxhQUFhO0FBQUE7QUFDbEQscUJBQVMsS0FBSztBQUFBO0FBR3BCLGVBQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlILDBCQUNMLGdCQUNBLFVBQ0EsS0FDQztBQUFBO0FBQ0QsWUFBTSxPQUFPLEtBQUssSUFBSSxNQUFNLHNCQUFzQjtBQUVsRCxVQUFJLGdCQUFnQix1QkFBTztBQUMxQixjQUFNLGNBQWMsTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLO0FBQzlDLGNBQU0sUUFBUSxZQUFZLE1BQU07QUFDaEMsWUFBSSxjQUE2QjtBQUNqQyxjQUFNLGlCQUFpQixlQUFlLEtBQUssS0FBSyxVQUMvQyxHQUNBLGVBQWUsS0FBSyxLQUFLLFNBQVM7QUFHbkMsWUFBSSxXQUFXO0FBQ2YsWUFBSSxDQUFDLEtBQUs7QUFDVCxxQkFBVyxPQUFPLGlCQUFpQjtBQUFBO0FBQzdCLHFCQUFXO0FBRWxCLGNBQU0sUUFBUSxDQUFDLFNBQVM7QUFDdkIsY0FBSSxLQUFLLFNBQVM7QUFBVyx3QkFBWSxLQUFLO0FBQUE7QUFDekMsd0JBQVksS0FBSztBQUFBO0FBR3ZCLFlBQUksV0FBMEI7QUFDOUIsaUJBQVMsSUFBSSxHQUFHLElBQUksWUFBWSxRQUFRLEtBQUs7QUFDNUMsY0FBSSxZQUFZLE9BQU87QUFBVSxxQkFBUyxLQUFLO0FBQUE7QUFHaEQsZUFBTztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSVQsd0JBQ0MsbUJBQ0EsaUJBQ0M7QUFDRCxRQUFJLFlBQTJCO0FBRS9CLHNCQUFrQixRQUFRLENBQUMsTUFBTSxVQUFVO0FBQzFDLFVBQUksUUFBUTtBQUFNLGtCQUFVLEtBQUssS0FBSyxJQUFJLFFBQVE7QUFBQTtBQUM3QyxrQkFBVSxLQUFLO0FBQUE7QUFHckIsUUFBSSxXQUFXO0FBQ2YsUUFBSSxXQUFXO0FBQ2YsYUFBUyxJQUFJLEdBQUcsSUFBSSxVQUFVLFFBQVEsS0FBSyxHQUFHO0FBQzdDLFVBQUksVUFBVSxNQUFNLElBQUk7QUFDdkIsWUFBSSxVQUFVLEtBQUssVUFBVTtBQUM1QixxQkFBVztBQUNYLHFCQUFXLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFLeEIsUUFBSSxhQUFhLGlCQUFpQjtBQUNqQyx3QkFBa0IsWUFBWSxrQkFBa0IsVUFDOUMsUUFBUSxNQUFNLElBQ2Q7QUFBQTtBQUdILFdBQU8sa0JBQWtCO0FBQUE7QUFBQSxFQUcxQixXQUFXLEtBQWM7QUFDeEIsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQjtBQUVwRCxRQUFJLFFBQVEsUUFBUSxLQUFLLEtBQUssY0FBYyxNQUFNO0FBQ2pELFVBQUksS0FBSyxTQUFTO0FBQ2pCLFlBQUksdUJBQU87QUFFWixZQUFNLGVBQWUsS0FBSyxnQkFBZ0IsS0FBSyxLQUFLO0FBRXBELFVBQUk7QUFDSixVQUFJLENBQUMsS0FBSztBQUNULDBCQUFrQixLQUFLLGtCQUFrQixLQUFLLEtBQUs7QUFBQSxhQUM3QztBQUNOLDBCQUFrQixLQUFLLGtCQUFrQjtBQUFBO0FBRzFDLFdBQUssZ0JBQWdCLE1BQU0sY0FBYyxpQkFBaUI7QUFBQSxXQUNwRDtBQUNOLFVBQUksdUJBQ0g7QUFBQTtBQUFBO0FBQUEsRUFLRyxTQUFTO0FBQUE7QUFDZCxZQUFNLEtBQUs7QUFFWCxVQUFJLEtBQUssU0FBUyxrQkFBa0I7QUFDbkMsY0FBTSxlQUFlLEtBQUssY0FDekIsaUJBQ0EsV0FDQSxDQUFDLFFBQW9CO0FBQ3BCLGVBQUs7QUFBQTtBQUFBO0FBS1IsV0FBSyxXQUFXO0FBQUEsUUFDZixJQUFJO0FBQUEsUUFDSixNQUFNO0FBQUEsUUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QjtBQUN2RCxlQUFLO0FBQUE7QUFBQTtBQUlQLFdBQUssV0FBVztBQUFBLFFBQ2YsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUI7QUFDdkQsY0FBSSxnQkFBZ0IsS0FBSyxLQUFLLE1BQU07QUFBQTtBQUFBO0FBSXRDLFdBQUssY0FBYyxJQUFJLGtCQUFrQixLQUFLLEtBQUs7QUFBQTtBQUFBO0FBQUEsRUFHcEQsV0FBVztBQUFBO0FBQUEsRUFFTCxlQUFlO0FBQUE7QUFDcEIsV0FBSyxXQUFXLE9BQU8sT0FDdEIsSUFDQSxrQkFDQSxNQUFNLEtBQUs7QUFBQTtBQUFBO0FBQUEsRUFJUCxlQUFlO0FBQUE7QUFDcEIsWUFBTSxLQUFLLFNBQVMsS0FBSztBQUFBO0FBQUE7QUFBQTtBQUkzQixzQ0FBZ0MsaUNBQWlCO0FBQUEsRUFHaEQsWUFBWSxNQUFVLFFBQWlCO0FBQ3RDLFVBQU0sTUFBSztBQUNYLFNBQUssU0FBUztBQUFBO0FBQUEsRUFHZixVQUFnQjtBQUNmLFVBQU0sRUFBRSxnQkFBZ0I7QUFFeEIsZ0JBQVk7QUFFWixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBRW5DLFFBQUksd0JBQVEsYUFDVixRQUFRLHNCQUNSLFFBQ0Esc0hBRUEsVUFBVSxDQUFDLFdBQVc7QUFDdEIsYUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUM5QixTQUFTLENBQUMscUJBQXFCO0FBQy9CLGFBQUssT0FBTyxTQUFTLG1CQUNwQjtBQUNELGFBQUssT0FBTztBQUFBO0FBQUE7QUFJaEIsUUFBSSx3QkFBUSxhQUNWLFFBQVEsbUJBQ1IsUUFDQSxpR0FFQSxVQUFVLENBQUMsV0FBVztBQUN0QixhQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFDOUIsU0FBUyxDQUFDLGtCQUFrQjtBQUM1QixhQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDckMsYUFBSyxPQUFPO0FBQUE7QUFBQTtBQUloQixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBRW5DLFFBQUksd0JBQVEsYUFDVixRQUFRLG9CQUNSLFFBQ0Esa0VBRUEsVUFBVSxDQUFDLFdBQVc7QUFDdEIsYUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLHVCQUM5QixTQUFTLENBQUMsVUFBVTtBQUNwQixhQUFLLE9BQU8sU0FBUyx3QkFBd0I7QUFDN0MsYUFBSyxPQUFPO0FBQUE7QUFBQTtBQUloQixRQUFJLHdCQUFRLGFBQ1YsUUFBUSxtQkFDUixRQUNBLDBFQUVBLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGFBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxxQkFDOUIsU0FBUyxDQUFDLFVBQVU7QUFDcEIsYUFBSyxPQUFPLFNBQVMsc0JBQXNCO0FBQzNDLGFBQUssT0FBTztBQUFBO0FBQUE7QUFJaEIsUUFBSSx3QkFBUSxhQUNWLFFBQVEsc0JBQ1IsUUFDQSw2RUFFQSxVQUFVLENBQUMsV0FBVztBQUN0QixhQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQzlCLFNBQVMsQ0FBQyxVQUFVO0FBQ3BCLGFBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxhQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTsiLAogICJuYW1lcyI6IFtdCn0K
